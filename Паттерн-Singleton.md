# Singleton (Одиночка)

""" Порождающие паттерны беспокоятся о гибком создании объектов без внесения 
в программу лишних зависимостей """

[Singleton (Одиночка)](https://refactoring.guru/ru/design-patterns/singleton) — 
это *порождающий* [паттерн проектирования](Паттерн.md), который гарантирует, что у класса 
есть только один экземпляр, а также предоставляет глобальную точку доступа (т.е. позволяет достучаться до этого объекта 
из любого места программы).

**Аналогия из жизни** <br>
Правительство государства — хороший пример одиночки. <br>
В государстве может быть только одно официальное правительство. 
Вне зависимости от того, кто конкретно заседает в правительстве,
оно имеет глобальную точку доступа «Правительство страны N».

#### Преимущества паттерна:
- Гарантирует наличие единственного экземпляра класса;
- Предоставляет к нему глобальную точку доступа;
- Реализует отложенную инициализацию объекта-одиночки.

#### Недостатки паттерна:
- Нарушает [принцип единственной ответственности](SOLID.md) класса;
- Маскирует плохой дизайн;
- Проблемы мультипоточности;
- Требует постоянного создания Mock-объектов при [юнит-тестировании](Django/Django-Test.md).

Пример реализации:
```python
class Singleton:
    __instance = None
    
    def __new__(cls, *args, **kwargs):
        if cls.__instance is None:
            cls.__instance = super().__new__(cls)
        return cls.__instance
    
    def __del__(self):
        Singleton.__instance = None

    def __call__(self, *args, **kwargs):
        # надо переопределить
        pass
```