# Битовые операции

**Бит** информации — символ или сигнал, который может принимать два 
значения: включено или выключено, да или нет, высокий или низкий, 
заряженный или незаряженный; <br>
в двоичной системе исчисления это `1`(единица) или `0`(ноль).

**Байт** — единица хранения и обработки цифровой информации (8 бит). 

Любое число кодируется набором бит. <br>

В каждом бите старший бит — знаковый бит <br>
**0** 0 0 0 0 0 0 0 <br>
 ^ <br>
бит знака: если 0 — положительное; 1 - отрицательное <br>
Биты нумеруются с конца 0,1,2...8.

## Битовые операции И, ИЛИ, НЕ, XOR

Приоритеты операций:
1. НЕ`~`
2. И`&`
3. ИЛИ`|` и XOR(исключающее или)`^` – в равной степени

### Битовая операция НЕ`~`
**Битовая операция НЕ`~`** – выполняет инверсию бит.

| x   | НЕ  | 
|:----|:---:|
| 0   |  1  |
| 1   |  0  |

```python
>>> a = 121
>>> bin(a)
'0b1111001'
>>> ~a
-122
```
*Получилось отрицательное число так как инвентирован старший бит, 
отвечающий за знак, и на единицу меньше !*<br>

### Битовая операция И`&`
**Битовая операция И`&`** – выполняет сравнение соответствующих битов согласно
таблице истинности: 

| x1  | x2  |  И  | 
|:----|:---:|:---:|
| 0   |  0  |  0  |
| 0   |  1  |  0  |
| 1   |  0  |  0  |
| 1   |  1  |  1  |
Записывается через оператор–`&`амперсанд.  
```python
>>> flags = 5
>>> mask = 4
>>> res = flags & mask
res
4
```
Как получилось:

| flags    |  0  |  0  |  0  |  0  |  0  |  1  |  0  |  1  |
|:---------|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
| mask     |  0  |  0  |  0  |  0  |  0  |  1  |  0  |  0  |
| **res**  |  0  |  0  |  0  |  0  |  0  |  1  |  0  |  0  |

Может использоваться для проверки включен ли бит.
```python
flags = 5
mask = 4
if flags & mask == mask:
    print("Включен 2-й бит числа")
else:
    print("2-й бит выключен")
```
Или для выключения определенных битов числа:
```python
>>> flags = 13
>>> mask = 5
>>> flags = flags & ~mask
8
```

| flags   |  0  |  0  |  0  |  0  |  1  |  1  |  0  |  1  |
|:--------|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
| ~mask   |  1  |  1  |  1  |  1  |  1  |  0  |  1  |  0  |
| **res** |  0  |  0  |  0  |  0  |  1  |  0  |  0  |  0  |

Краткая форма записи:`flags &= mask`

### Битовая операция ИЛИ`|`
**Битовая операция ИЛИ`|`** – выполняет сравнение соответствующих битов согласно
таблице истинности: 

| x1  | x2  | ИЛИ | 
|:----|:---:|:---:|
| 0   |  0  |  0  |
| 0   |  1  |  1  |
| 1   |  0  |  1  |
| 1   |  1  |  1  |

Записывается через оператор–`|`.

Обычно применяется для того, чтобы включить определенный бит переменной.
```python
>>> flags = 8
>>> mask = 5
>>> flags = flags | mask
>>> flags
13
```

| flags    |  0  |  0  |  0  |  0  |  1  |  0  |  0  |  0  |
|:---------|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
| mask     |  0  |  0  |  0  |  0  |  0  |  1  |  0  |  1  |
| **res**  |  0  |  0  |  0  |  0  |  1  |  1  |  0  |  1  |

Краткая форма записи:`flags |= mask`

### Битовая операция XOR(исключающее или)`^`
**Битовая операция XOR(исключающее или)`^`** – выполняет сравнение соответствующих битов согласно
таблице истинности: 

| x1  | x2  | XOR | 
|:----|:---:|:---:|
| 0   |  0  |  0  |
| 0   |  1  |  1  |
| 1   |  0  |  1  |
| 1   |  1  |  0  |

Применяется для переключения бит:
```python
>>> flags = 9
>>> mask = 1
>>> flags = flags ^ mask
>>> flags
8
```

| flags    |  0  |  0  |  0  |  0  |  1  |  0  |  0  |  1  |
|:---------|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
| mask     |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  1  |
| **res**  |  0  |  0  |  0  |  0  |  1  |  0  |  0  |  0  |

XOR удобен, что может вернуть исходное состояние применив обратно:
```python
>>> flags ^= mask
>>> flags
9
```
Краткая форма записи:`flags ^= mask`

## Операторы смещения бит (Сдвиговые операторы)

`>>` – смещение бит вправо <br>
`<<` – смещение бит влево

```python
>>> x = 160
>>> bin(x)
'0b10100000'
```
Сдвинем все биты этого числа *вправо* на один бит:
```python
>>> x = x >> 1
>>> x
80
>>> bin(x)
'0b1010000'
```
Стало на один`0`меньше: (`10100000` -> `1010000`)

*Сдвиг на 1 бит вправо делит исходное число на 2 !* <br>
*Сдвиг на 2 бит вправо делит исходное число на 4 (2 в степени 2)!* <br>
и т.д.
```python
>>> x = x >> 2
>>> x
20
>>> x = x >> 2
>>> x
5
```

Сдвинем еще остаток на 1 бит вправо:
```python
>>> x
5
>>> bin(x)
'0b101'
>>> x = x >> 1
>>> x
2
>>> bin(x)
'0b10'
```
*Эквивалент`//`деления без остатка*

*Если сдвигать на бит влево – то получиться операция умножения на 2:*
```python
>>> x
2
>>> x = x << 1
>>> x
4
```
*Если сдвигать на 3 бита влево – то получиться операция умножения на 8 (2 в степени 3):*
```python
>>> x = x << 3
>>> x
32
```

Эти операции работают быстрее, чем традиционные`*`и`//` 