# View DRF

[API](../REST%20API.md) [DRF](DRF.md) состоит из 3-х слоев: 
- `Serializer (Сериалайзер)`
- `View (Вид)` 
- `Router (Роутер)`

[Serializer (Сериалайзер)](DRF-Сериалайзеры.md) преобразует информацию (хранящуюся в базе данных и 
определенную с помощью [моделей](Django-MVT-Model.md) Django) в формат, который легко и эффективно 
передается через API. Сериалайзеры анализирует информацию в обоих направлениях (чтение и запись).

**[View (Представление)](DRF-View.md) определяет функции CRUD (чтение, создание, обновление, удаление), 
которые будут доступны через API.**

[Router (маршрутизатор)](DRF-Router.md) определяет URL-адреса, которые будут предоставлять 
доступ к каждому View (виду). 

Крутой сайт по Class Based View DRF — [CFRF] (https://www.cdrf.co/)

---
API (endpoint) можно описать:
1. Функционально - указав декоратор `@api_view` и методы которые он может принимать.
2. Через Class Base View, для этого нам нужно наследоваться от `APIView`.


#### APIView
`APIView` является подклассом джанговского класса `View`.

Классы `APIView` имеют следующие отличия от обычных классов `View`:
- запросы, переданные обработчику будут экземплярами `Request` REST framework, а не джанговских `HttpRequest`.
- обрабатыващие методы могут возвращать `Response` REST framework вместо джанговских `HttpResponse`. Представление будет осущестлвять согласование содержимого и устанавливать нужный рендерер для ответа.
- любые исключения `APIException` будут выявлены и связаны с соответствующими ответами.
- входящие запросы будут подтверждены и соответствующее разрешение и/или проверки будут произведены перед тем как передать запрос на обработку.

В отличие от классической Django, респонсом в REST системе, будет обычный HTTP респонс содержащий набор данных, чаще всего JSON (но бывает и нет).

Классическая Джанго тоже может возвращать HTTP респонс и быть обработчиком REST архитектуры, но существующий пекедж сильно упрощает эти процессы.

Для обработки такого респонса, есть специальный объект:

`Response(data, status=None, template_name=None, headers=None, content_type=None)`

Где `data` - это данные,

`status` - код ответа (200, 404, 503),

`template_name` - возможность указать темплейт, если необходимо вернуть страницу, а не просто набор данных,

`headers` и `content_type` - хедеры и контент-тайп запроса.



Лекция [тут](https://github.com/PonomaryovVladyslav/PythonCources/blob/master/lesson38.md)



