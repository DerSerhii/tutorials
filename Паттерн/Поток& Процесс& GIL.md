# Потоки & Процессы

`Процесс` — экземпляр программы во время выполнения, независимый объект, которому 
выделены системные ресурсы (например, процессорное время и память). 

Каждый процесс выполняется в *отдельном адресном пространстве*: один процесс не может 
получить доступ к переменным и структурам данных другого. 

Если процесс хочет получить доступ к чужим ресурсам, 
необходимо использовать межпроцессное взаимодействие.
Это могут быть конвейеры, файлы, каналы связи между компьютерами и многое другое.

Процесс – это часть виртуальной памяти и ресурсов, которую ОС выделяет для выполнения программы. Если открыть несколько экземпляров одного приложения, под каждый система выделит по процессу. В современных браузерах за каждую вкладку может отвечать отдельный процесс.

---

`Поток` — это по сути последовательность инструкций, которые выполняются параллельно 
с другими потоками. Короче, потоки — это способ сделать несколько вещей одновременно. 

Каждая программа создает по меньшей мере один поток: основной, 
который запускает функцию main(). 
Программа, использующая только главный поток, является однопоточной; 
если добавить один или более потоков, она станет многопоточной.

Поток — определенный способ выполнения процесса. 
Когда один поток изменяет ресурс процесса, это изменение сразу же становится видно другим потокам этого процесса.

Поток использует то же самое пространства стека, что и процесс, 
а множество потоков совместно используют данные своих состояний. 
Как правило, каждый поток может работать (читать и писать) с одной и той же областью 
памяти, в отличие от процессов, 
которые не могут просто так получить доступ к памяти другого процесса. 
У каждого потока есть собственные регистры и собственный стек, 
но другие потоки могут их использовать.

Поток — это минимальная единица работы, запланированная для выполнения 
операционной системой.

О потоках нужно знать следующее:
- они существуют внутри процесса;
- в одном процессе может быть несколько потоков;
- потоки в одном процессе разделяют состояние и память родительского процесса;
- потоки работают параллельно.
---

#### Разница между потоками и процессами
Потоки используют память, выделенную под процесс, а процессы требуют себе отдельное 
место в памяти. Поэтому потоки создаются и завершаются быстрее: системе не нужно 
каждый раз выделять им новое адресное пространство, а потом высвобождать его.

Процессы работают каждый со своими данными — обмениваться чем-то они могут только 
через механизм межпроцессного взаимодействия. Потоки обращаются к данным и ресурсам 
друг друга напрямую: что изменил один — сразу доступно всем. 
Поток может контролировать «собратьев» по процессу, в то время как процесс 
контролирует исключительно своих «дочек». Поэтому переключаться между потоками 
быстрее и коммуникация между ними организована проще.

**Многопоточность** — это когда процесс приложения разбит на потоки, которые параллельно — 
в одну единицу времени — обрабатываются процессором.

---

### GIL. Global Interpreter Lock
[Python Global Interpreter Lock (GIL)](../Python/Python-GIL.md) — это своеобразная блокировка, 
позволяющая только одному потоку управлять интерпретатором Python. 
Это означает, что в любой момент времени будет выполняться только один конкретный поток.

Работа GIL может казаться несущественной для разработчиков, создающих 
однопоточные программы. Но во многопоточных программах отсутствие GIL может негативно 
сказываться на производительности процессоро-зависымых программ.

Поскольку GIL позволяет работать только одному потоку даже в многопоточном 
приложении, он заработал репутацию «печально известной» функции.

Фактически python не вызывает много потоков одновременно, а только очень быстро их переключает, что 
делает все многопоточные вычисления, по факту, однопоточными.
