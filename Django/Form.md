# Form

***Html форма*** — это специальный *тег*, который "сообщает" браузеру, что данные из этого тега нужно
сгруппировать и подготовить к отправке на сервер.

Принимает два параметра **action** и **method**:
- `action` описывает, куда форма по результату должна обращаться, в нашем случае это будет ***url***, если не 
указан явно, то форма будет отправлена на тот же *url*, на котором сейчас находится.
- `method` отвечает за метод отправки, варианты это ***get*** и ***post***. *get* будет использован по умолчанию если
не указан явно.

Формы `post` используются для передачи данных не подлежащих огласке, например, логин и пароль. <br>
Формы `get` используются для общедоступной информации, например строка поиска.

Внутри формы указывается нужное кол-во тегов `<input>` с нужными типами.<br>
Именно эти данные будут в последствии переданы серверу.

[Описание HTML форм](https://www.w3schools.com/html/html_forms.asp) 

*Основные типы **input**: <br>
- `<input type="submit">`— отправка формы, <br>
- `<input type="number">`— ввод числа, <br>
- `<input type="text">`— ввод текста, <br>
- `<input type="checkbox">`— чекбокс (выбор нескольких элементов через галочки), <br>
- `<input type="radio">`— радиобаттон (выбор только одного элемента из списка), <br>
- `<input type="button">`— классическая кнопка (если в форме есть один такой элемент, но нет сабмита,
  браузер автоматически подсчитает его сабмитом), <br>
- `<input type="hidden">`— скрытое поле, чаще всего нужно для целей безопасности или добавления информации
и данным не отображая её (Не отображается).

[Другие типы input](https://www.w3schools.com/html/html_form_input_types.asp)

### Валидность

**Валидность** — это соответствие заданным критериям. 

Например, если мы ожидаем, что нам пришлют возраст, и мы ожидаем цифру, но нам присылают букву, это значит, что данные не валидны.

Некоторые распространённые виды валидаций можно указать как атрибут поля формы, например, 
максимальную длинну для строки, или максимальное и минимальное значение для числа.

## ModelForm

[**ModelForm**](https://docs.djangoproject.com/en/3.1/topics/forms/modelforms/) - это тип 
формы который генерируется напрямую из модели.

```python
from django.forms import ModelForm

class AuthorForm(ModelForm):
    class Meta:
        model = Author
        fields = ['name', 'title', 'birth_date']


class BookForm(ModelForm):
    class Meta:
        model = Book
        exclude = ['dob']
```

Поле `fields` либо `exclude` являются *обязательными* !

### Валидация
Помимо стандартного метода `is_valid()` у ModelForm существует так же встроенный метод `full_clean()`

Если первый отвечает за валидацию формы, то второй отвечает за валидацию для объекта модели.

### Метод `save()` у формы
Метод `save()` в **ModelForm** объекте выполняет по сути два действия:
1. получает объект модели основываясь на переданных данных 
2. вызывает метод `save()`, но уже для модели

Метод `save()` может принимать аргумент `commit=`, который по умолчанию `True`. 

Если указать `commit=` как `False`, метод `save()` *модели* не будет вызван 
(объект не будет сохранён в базу), будет только создан предварительный объект модели.

Используется, когда нужно "дополнить" данные перед сохранением в базу. 
Очень часто используется! Например, для добавления пользователя из `request`.
```python
form = PartialAuthorForm(request.POST)
author = form.save(commit=False)
author.title = 'Mr'
author.save()
```

### Передача объекта

Такая форма может принимать не только данные, но и целый объект из базы:

```python
from myapp.models import Article
from myapp.forms import ArticleForm

# Create a form instance from POST data.
f = ArticleForm(request.POST)

# Save a new Article object from the form's data.
new_article = f.save()

# Create a form to edit an existing Article, but use
# POST data to populate the form.
a = Article.objects.get(pk=1)
f = ArticleForm(request.POST, instance=a)
f.save()
```
Так как мы можем не только создавать новый инстанс, но и обновлять существующий.

Лекция [тут](https://github.com/PonomaryovVladyslav/PythonCources/blob/master/lesson33.md)